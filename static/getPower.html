<!-- Copied and adapted from Bootstrap page -->
<!doctype html>

<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <style>
      div {margin: 35px;}
	  input[type=number]{width: 10ch}
	  input[type=text]{width: 70ch}
	  #demo {width: 35ch;background-color: LightGreen;}
	  #output1 {background-color: Plum;}
    </style>
    <title>Wind turbine power prediction utility</title>		
	
    <script>myFunction();</script>
	
  </head>
  <body onload="myFunction() ">
    <h1 style="text-align:center;color: Plum">Predict turbine power output from input wind speed</h1>
	<p>This utility predicts wind turbine power from an input wind speed value. 
	   As turbines do not function below a certain minimum wind speed, or above a particular maximum wind speed
	   (due to frictional forces in the mechanism, and to protect the turbine from damage caused by forces that are too large)
	   a power value of zero is returned if the input is equal to or below the minimum or above the maximum speed.
	</p>
	   <input id="demo" type="text" placeholder="Max" readonly size="3" border="0">	
	<br><br>   
    <p>	
	   Also, two output values are produced. Turbines are sometimes offline for maintenance reasons or to prevent overloading the
	   power network. The first output value excludes these offline values, the second includes them.
    </p>
	
    <div class="container">


    <!-- <input class="form-control" id="demo" type="text" placeholder="Max" readonly> -->
  
       <form action="/api/speed" method="POST">
        <div class="form-group">
            <label for="name" style="font-size:30px;color: red">Input wind speed (km/h)</label>
            <input style="color: red" type="number" class="form-control" name="name" placeholder="0" size="6" step="0.001">
        </div>
        <button type="submit" class="btn btn-success">Submit <span class="fa fa-arrow-right"></span></button>
        </form>

        <div class="row">
          <div class="col-sm">
            <input class="form-control" id="output1" type="text" placeholder="Predicted power output (KwH) - " readonly>
          </div>
        </div>	
      </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <script src="https://raw.githubusercontent.com/marioizquierdo/jquery.serializeJSON/master/jquery.serializejson.js="anonymous"></script>

    <script>
	function myFunction() {
            $.getJSON("/api/uniform", function(data) {
            $('#demo').val(data.value);
            });
    };
        // Adapted from stack overflow posts.

    $(document).ready(function() {

    // process the form
    $('form').submit(function(event) {

        // get the form data
        // there are many ways to get this data using jQuery (you can use the class or id also)
        var formData = {
            'name'              : $('input[name=name]').val(),
        };
        console.log(formData);
        // process the form
        $.ajax({
            type        : 'POST', // define the type of HTTP verb we want to use (POST for our form)
            url         : '/api/speed', // the url where we want to POST
            data        : formData, // our data object
            dataType    : 'json', // what type of data do we expect back from the server
            encode      : true
        })
            // using the done promise callback
            .done(function(data) {

                // log data to the console so we can see
                console.log(data);
                $('#output1').val(data.value);
                // here we will handle errors and validation messages
            });

        // stop the form from submitting the normal way and refreshing the page
        event.preventDefault();
    });
    });

		
    </script>
  </body>
</html>